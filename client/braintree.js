/*!
 * Braintree End-to-End Encryption Library
 * https://www.braintreepayments.com
 * Copyright (c) 2009-2014 Braintree, a division of PayPal, Inc.
 *
 * JSBN
 * Copyright (c) 2005  Tom Wu
 *
 * Both Licensed under the MIT License.
 * http://opensource.org/licenses/MIT
 *
 * ASN.1 JavaScript decoder
 * Copyright (c) 2008-2009 Lapo Luchini <lapo@lapo.it>
 * Licensed under the ISC License.
 * http://opensource.org/licenses/ISC
 */
!function(){function t(e,n){e instanceof t?(this.enc=e.enc,this.pos=e.pos):(this.enc=e,this.pos=n)}function e(t,e,n,i,r){this.stream=t,this.header=e,this.length=n,this.tag=i,this.sub=r}function n(t){var e,n,i="";for(e=0;e+3<=t.length;e+=3)n=parseInt(t.substring(e,e+3),16),i+=ee.charAt(n>>6)+ee.charAt(63&n);for(e+1==t.length?(n=parseInt(t.substring(e,e+1),16),i+=ee.charAt(n<<2)):e+2==t.length&&(n=parseInt(t.substring(e,e+2),16),i+=ee.charAt(n>>2)+ee.charAt((3&n)<<4));(3&i.length)>0;)i+=ne;return i}function i(t){var e,n,i,r="",o=0;for(e=0;e<t.length&&t.charAt(e)!=ne;++e)i=ee.indexOf(t.charAt(e)),0>i||(0==o?(r+=c(i>>2),n=3&i,o=1):1==o?(r+=c(n<<2|i>>4),n=15&i,o=2):2==o?(r+=c(n),r+=c(i>>2),n=3&i,o=3):(r+=c(n<<2|i>>4),r+=c(15&i),o=0));return 1==o&&(r+=c(n<<2)),r}function r(t){var e,n=i(t),r=new Array;for(e=0;2*e<n.length;++e)r[e]=parseInt(n.substring(2*e,2*e+2),16);return r}function o(t,e,n){null!=t&&("number"==typeof t?this.fromNumber(t,e,n):null==e&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,e))}function a(){return new o(null)}function s(t,e,n,i,r,o){for(;--o>=0;){var a=e*this[t++]+n[i]+r;r=Math.floor(a/67108864),n[i++]=67108863&a}return r}function h(t,e,n,i,r,o){for(var a=32767&e,s=e>>15;--o>=0;){var h=32767&this[t],l=this[t++]>>15,c=s*h+l*a;h=a*h+((32767&c)<<15)+n[i]+(1073741823&r),r=(h>>>30)+(c>>>15)+s*l+(r>>>30),n[i++]=1073741823&h}return r}function l(t,e,n,i,r,o){for(var a=16383&e,s=e>>14;--o>=0;){var h=16383&this[t],l=this[t++]>>14,c=s*h+l*a;h=a*h+((16383&c)<<14)+n[i]+r,r=(h>>28)+(c>>14)+s*l,n[i++]=268435455&h}return r}function c(t){return he.charAt(t)}function p(t,e){var n=le[t.charCodeAt(e)];return null==n?-1:n}function u(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.s=this.s}function d(t){this.t=1,this.s=0>t?-1:0,t>0?this[0]=t:-1>t?this[0]=t+this.DV:this.t=0}function f(t){var e=a();return e.fromInt(t),e}function m(t,e){var n;if(16==e)n=4;else if(8==e)n=3;else if(256==e)n=8;else if(2==e)n=1;else if(32==e)n=5;else{if(4!=e)return void this.fromRadix(t,e);n=2}this.t=0,this.s=0;for(var i=t.length,r=!1,a=0;--i>=0;){var s=8==n?255&t[i]:p(t,i);0>s?"-"==t.charAt(i)&&(r=!0):(r=!1,0==a?this[this.t++]=s:a+n>this.DB?(this[this.t-1]|=(s&(1<<this.DB-a)-1)<<a,this[this.t++]=s>>this.DB-a):this[this.t-1]|=s<<a,a+=n,a>=this.DB&&(a-=this.DB))}8==n&&0!=(128&t[0])&&(this.s=-1,a>0&&(this[this.t-1]|=(1<<this.DB-a)-1<<a)),this.clamp(),r&&o.ZERO.subTo(this,this)}function y(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t}function b(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.toRadix(t);e=2}var n,i=(1<<e)-1,r=!1,o="",a=this.t,s=this.DB-a*this.DB%e;if(a-->0)for(s<this.DB&&(n=this[a]>>s)>0&&(r=!0,o=c(n));a>=0;)e>s?(n=(this[a]&(1<<s)-1)<<e-s,n|=this[--a]>>(s+=this.DB-e)):(n=this[a]>>(s-=e)&i,0>=s&&(s+=this.DB,--a)),n>0&&(r=!0),r&&(o+=c(n));return r?o:"0"}function g(){var t=a();return o.ZERO.subTo(this,t),t}function v(){return this.s<0?this.negate():this}function _(t){var e=this.s-t.s;if(0!=e)return e;var n=this.t;if(e=n-t.t,0!=e)return this.s<0?-e:e;for(;--n>=0;)if(0!=(e=this[n]-t[n]))return e;return 0}function w(t){var e,n=1;return 0!=(e=t>>>16)&&(t=e,n+=16),0!=(e=t>>8)&&(t=e,n+=8),0!=(e=t>>4)&&(t=e,n+=4),0!=(e=t>>2)&&(t=e,n+=2),0!=(e=t>>1)&&(t=e,n+=1),n}function E(){return this.t<=0?0:this.DB*(this.t-1)+w(this[this.t-1]^this.s&this.DM)}function S(t,e){var n;for(n=this.t-1;n>=0;--n)e[n+t]=this[n];for(n=t-1;n>=0;--n)e[n]=0;e.t=this.t+t,e.s=this.s}function C(t,e){for(var n=t;n<this.t;++n)e[n-t]=this[n];e.t=Math.max(this.t-t,0),e.s=this.s}function T(t,e){var n,i=t%this.DB,r=this.DB-i,o=(1<<r)-1,a=Math.floor(t/this.DB),s=this.s<<i&this.DM;for(n=this.t-1;n>=0;--n)e[n+a+1]=this[n]>>r|s,s=(this[n]&o)<<i;for(n=a-1;n>=0;--n)e[n]=0;e[a]=s,e.t=this.t+a+1,e.s=this.s,e.clamp()}function P(t,e){e.s=this.s;var n=Math.floor(t/this.DB);if(n>=this.t)return void(e.t=0);var i=t%this.DB,r=this.DB-i,o=(1<<i)-1;e[0]=this[n]>>i;for(var a=n+1;a<this.t;++a)e[a-n-1]|=(this[a]&o)<<r,e[a-n]=this[a]>>i;i>0&&(e[this.t-n-1]|=(this.s&o)<<r),e.t=this.t-n,e.clamp()}function A(t,e){for(var n=0,i=0,r=Math.min(t.t,this.t);r>n;)i+=this[n]-t[n],e[n++]=i&this.DM,i>>=this.DB;if(t.t<this.t){for(i-=t.s;n<this.t;)i+=this[n],e[n++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;n<t.t;)i-=t[n],e[n++]=i&this.DM,i>>=this.DB;i-=t.s}e.s=0>i?-1:0,-1>i?e[n++]=this.DV+i:i>0&&(e[n++]=i),e.t=n,e.clamp()}function U(t,e){var n=this.abs(),i=t.abs(),r=n.t;for(e.t=r+i.t;--r>=0;)e[r]=0;for(r=0;r<i.t;++r)e[r+n.t]=n.am(0,i[r],e,r,0,n.t);e.s=0,e.clamp(),this.s!=t.s&&o.ZERO.subTo(e,e)}function k(t){for(var e=this.abs(),n=t.t=2*e.t;--n>=0;)t[n]=0;for(n=0;n<e.t-1;++n){var i=e.am(n,e[n],t,2*n,0,1);(t[n+e.t]+=e.am(n+1,2*e[n],t,2*n+1,i,e.t-n-1))>=e.DV&&(t[n+e.t]-=e.DV,t[n+e.t+1]=1)}t.t>0&&(t[t.t-1]+=e.am(n,e[n],t,2*n,0,1)),t.s=0,t.clamp()}function M(t,e,n){var i=t.abs();if(!(i.t<=0)){var r=this.abs();if(r.t<i.t)return null!=e&&e.fromInt(0),void(null!=n&&this.copyTo(n));null==n&&(n=a());var s=a(),h=this.s,l=t.s,c=this.DB-w(i[i.t-1]);c>0?(i.lShiftTo(c,s),r.lShiftTo(c,n)):(i.copyTo(s),r.copyTo(n));var p=s.t,u=s[p-1];if(0!=u){var d=u*(1<<this.F1)+(p>1?s[p-2]>>this.F2:0),f=this.FV/d,m=(1<<this.F1)/d,y=1<<this.F2,b=n.t,g=b-p,v=null==e?a():e;for(s.dlShiftTo(g,v),n.compareTo(v)>=0&&(n[n.t++]=1,n.subTo(v,n)),o.ONE.dlShiftTo(p,v),v.subTo(s,s);s.t<p;)s[s.t++]=0;for(;--g>=0;){var _=n[--b]==u?this.DM:Math.floor(n[b]*f+(n[b-1]+y)*m);if((n[b]+=s.am(0,_,n,g,0,p))<_)for(s.dlShiftTo(g,v),n.subTo(v,n);n[b]<--_;)n.subTo(v,n)}null!=e&&(n.drShiftTo(p,e),h!=l&&o.ZERO.subTo(e,e)),n.t=p,n.clamp(),c>0&&n.rShiftTo(c,n),0>h&&o.ZERO.subTo(n,n)}}}function I(t){var e=a();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(o.ZERO)>0&&t.subTo(e,e),e}function N(t){this.m=t}function D(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}function R(t){return t}function F(t){t.divRemTo(this.m,null,t)}function x(t,e,n){t.multiplyTo(e,n),this.reduce(n)}function O(t,e){t.squareTo(e),this.reduce(e)}function B(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var e=3&t;return e=e*(2-(15&t)*e)&15,e=e*(2-(255&t)*e)&255,e=e*(2-((65535&t)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}function L(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function z(t){var e=a();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(o.ZERO)>0&&this.m.subTo(e,e),e}function V(t){var e=a();return t.copyTo(e),this.reduce(e),e}function j(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var n=32767&t[e],i=n*this.mpl+((n*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(n=e+this.m.t,t[n]+=this.m.am(0,i,t,e,0,this.m.t);t[n]>=t.DV;)t[n]-=t.DV,t[++n]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function W(t,e){t.squareTo(e),this.reduce(e)}function H(t,e,n){t.multiplyTo(e,n),this.reduce(n)}function q(){return 0==(this.t>0?1&this[0]:this.s)}function Q(t,e){if(t>4294967295||1>t)return o.ONE;var n=a(),i=a(),r=e.convert(this),s=w(t)-1;for(r.copyTo(n);--s>=0;)if(e.sqrTo(n,i),(t&1<<s)>0)e.mulTo(i,r,n);else{var h=n;n=i,i=h}return e.revert(n)}function Y(t,e){var n;return n=256>t||e.isEven()?new N(e):new L(e),this.exp(t,n)}function J(t,e){return new o(t,e)}function G(t,e){if(e<t.length+11)throw new Error("Message too long for RSA");for(var n=new Array,i=t.length-1;i>=0&&e>0;){var r=t.charCodeAt(i--);128>r?n[--e]=r:r>127&&2048>r?(n[--e]=63&r|128,n[--e]=r>>6|192):(n[--e]=63&r|128,n[--e]=r>>6&63|128,n[--e]=r>>12|224)}n[--e]=0;for(var a=0,s=0,h=0;e>2;)0==h&&(s=ce.random.randomWords(1,0)[0]),a=s>>h&255,h=(h+8)%32,0!=a&&(n[--e]=a);return n[--e]=2,n[--e]=0,new o(n)}function Z(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function K(t,e){if(!(null!=t&&null!=e&&t.length>0&&e.length>0))throw new Error("Invalid RSA public key");this.n=J(t,16),this.e=parseInt(e,16)}function X(t){return t.modPowInt(this.e,this.n)}function $(t){var e=G(t,this.n.bitLength()+7>>3);if(null==e)return null;var n=this.doPublic(e);if(null==n)return null;var i=n.toString(16);return 0==(1&i.length)?i:"0"+i}t.prototype.get=function(t){if(void 0==t&&(t=this.pos++),t>=this.enc.length)throw"Requesting byte offset "+t+" on a stream of length "+this.enc.length;return this.enc[t]},t.prototype.hexDigits="0123456789ABCDEF",t.prototype.hexByte=function(t){return this.hexDigits.charAt(t>>4&15)+this.hexDigits.charAt(15&t)},t.prototype.hexDump=function(t,e){for(var n="",i=t;e>i;++i)switch(n+=this.hexByte(this.get(i)),15&i){case 7:n+="  ";break;case 15:n+="\n";break;default:n+=" "}return n},t.prototype.parseStringISO=function(t,e){for(var n="",i=t;e>i;++i)n+=String.fromCharCode(this.get(i));return n},t.prototype.parseStringUTF=function(t,e){for(var n="",i=0,r=t;e>r;){var i=this.get(r++);n+=String.fromCharCode(128>i?i:i>191&&224>i?(31&i)<<6|63&this.get(r++):(15&i)<<12|(63&this.get(r++))<<6|63&this.get(r++))}return n},t.prototype.reTime=/^((?:1[89]|2\d)?\d\d)(0[1-9]|1[0-2])(0[1-9]|[12]\d|3[01])([01]\d|2[0-3])(?:([0-5]\d)(?:([0-5]\d)(?:[.,](\d{1,3}))?)?)?(Z|[-+](?:[0]\d|1[0-2])([0-5]\d)?)?$/,t.prototype.parseTime=function(t,e){var n=this.parseStringISO(t,e),i=this.reTime.exec(n);return i?(n=i[1]+"-"+i[2]+"-"+i[3]+" "+i[4],i[5]&&(n+=":"+i[5],i[6]&&(n+=":"+i[6],i[7]&&(n+="."+i[7]))),i[8]&&(n+=" UTC","Z"!=i[8]&&(n+=i[8],i[9]&&(n+=":"+i[9]))),n):"Unrecognized time: "+n},t.prototype.parseInteger=function(t,e){var n=e-t;if(n>4){n<<=3;var i=this.get(t);if(0==i)n-=8;else for(;128>i;)i<<=1,--n;return"("+n+" bit)"}for(var r=0,o=t;e>o;++o)r=r<<8|this.get(o);return r},t.prototype.parseBitString=function(t,e){var n=this.get(t),i=(e-t-1<<3)-n,r="("+i+" bit)";if(20>=i){var o=n;r+=" ";for(var a=e-1;a>t;--a){for(var s=this.get(a),h=o;8>h;++h)r+=s>>h&1?"1":"0";o=0}}return r},t.prototype.parseOctetString=function(t,e){var n=e-t,i="("+n+" byte) ";n>20&&(e=t+20);for(var r=t;e>r;++r)i+=this.hexByte(this.get(r));return n>20&&(i+=String.fromCharCode(8230)),i},t.prototype.parseOID=function(t,e){for(var n,i=0,r=0,o=t;e>o;++o){var a=this.get(o);i=i<<7|127&a,r+=7,128&a||(void 0==n?n=parseInt(i/40)+"."+i%40:n+="."+(r>=31?"bigint":i),i=r=0),n+=String.fromCharCode()}return n},e.prototype.typeName=function(){if(void 0==this.tag)return"unknown";var t=this.tag>>6,e=(this.tag>>5&1,31&this.tag);switch(t){case 0:switch(e){case 0:return"EOC";case 1:return"BOOLEAN";case 2:return"INTEGER";case 3:return"BIT_STRING";case 4:return"OCTET_STRING";case 5:return"NULL";case 6:return"OBJECT_IDENTIFIER";case 7:return"ObjectDescriptor";case 8:return"EXTERNAL";case 9:return"REAL";case 10:return"ENUMERATED";case 11:return"EMBEDDED_PDV";case 12:return"UTF8String";case 16:return"SEQUENCE";case 17:return"SET";case 18:return"NumericString";case 19:return"PrintableString";case 20:return"TeletexString";case 21:return"VideotexString";case 22:return"IA5String";case 23:return"UTCTime";case 24:return"GeneralizedTime";case 25:return"GraphicString";case 26:return"VisibleString";case 27:return"GeneralString";case 28:return"UniversalString";case 30:return"BMPString";default:return"Universal_"+e.toString(16)}case 1:return"Application_"+e.toString(16);case 2:return"["+e+"]";case 3:return"Private_"+e.toString(16)}},e.prototype.content=function(){if(void 0==this.tag)return null;var t=this.tag>>6;if(0!=t)return null==this.sub?null:"("+this.sub.length+")";var e=31&this.tag,n=this.posContent(),i=Math.abs(this.length);switch(e){case 1:return 0==this.stream.get(n)?"false":"true";case 2:return this.stream.parseInteger(n,n+i);case 3:return this.sub?"("+this.sub.length+" elem)":this.stream.parseBitString(n,n+i);case 4:return this.sub?"("+this.sub.length+" elem)":this.stream.parseOctetString(n,n+i);case 6:return this.stream.parseOID(n,n+i);case 16:case 17:return"("+this.sub.length+" elem)";case 12:return this.stream.parseStringUTF(n,n+i);case 18:case 19:case 20:case 21:case 22:case 26:return this.stream.parseStringISO(n,n+i);case 23:case 24:return this.stream.parseTime(n,n+i)}return null},e.prototype.toString=function(){return this.typeName()+"@"+this.stream.pos+"[header:"+this.header+",length:"+this.length+",sub:"+(null==this.sub?"null":this.sub.length)+"]"},e.prototype.print=function(t){if(void 0==t&&(t=""),document.writeln(t+this),null!=this.sub){t+="  ";for(var e=0,n=this.sub.length;n>e;++e)this.sub[e].print(t)}},e.prototype.toPrettyString=function(t){void 0==t&&(t="");var e=t+this.typeName()+" @"+this.stream.pos;if(this.length>=0&&(e+="+"),e+=this.length,32&this.tag?e+=" (constructed)":3!=this.tag&&4!=this.tag||null==this.sub||(e+=" (encapsulates)"),e+="\n",null!=this.sub){t+="  ";for(var n=0,i=this.sub.length;i>n;++n)e+=this.sub[n].toPrettyString(t)}return e},e.prototype.posStart=function(){return this.stream.pos},e.prototype.posContent=function(){return this.stream.pos+this.header},e.prototype.posEnd=function(){return this.stream.pos+this.header+Math.abs(this.length)},e.decodeLength=function(t){var e=t.get(),n=127&e;if(n==e)return n;if(n>3)throw"Length over 24 bits not supported at position "+(t.pos-1);if(0==n)return-1;e=0;for(var i=0;n>i;++i)e=e<<8|t.get();return e},e.hasContent=function(n,i,r){if(32&n)return!0;if(3>n||n>4)return!1;var o=new t(r);3==n&&o.get();var a=o.get();if(a>>6&1)return!1;try{var s=e.decodeLength(o);return o.pos-r.pos+s==i}catch(h){return!1}},e.decode=function(n){n instanceof t||(n=new t(n,0));var i=new t(n),r=n.get(),o=e.decodeLength(n),a=n.pos-i.pos,s=null;if(e.hasContent(r,o,n)){var h=n.pos;if(3==r&&n.get(),s=[],o>=0){for(var l=h+o;n.pos<l;)s[s.length]=e.decode(n);if(n.pos!=l)throw"Content size is not correct for container starting at offset "+h}else try{for(;;){var c=e.decode(n);if(0==c.tag)break;s[s.length]=c}o=h-n.pos}catch(p){throw"Exception while decoding undefined length content: "+p}}else n.pos+=o;return new e(i,a,o,r,s)};var te,ee="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ne="=",ie=0xdeadbeefcafe,re=15715070==(16777215&ie);re&&"Microsoft Internet Explorer"==navigator.appName?(o.prototype.am=h,te=30):re&&"Netscape"!=navigator.appName?(o.prototype.am=s,te=26):(o.prototype.am=l,te=28),o.prototype.DB=te,o.prototype.DM=(1<<te)-1,o.prototype.DV=1<<te;var oe=52;o.prototype.FV=Math.pow(2,oe),o.prototype.F1=oe-te,o.prototype.F2=2*te-oe;var ae,se,he="0123456789abcdefghijklmnopqrstuvwxyz",le=new Array;for(ae="0".charCodeAt(0),se=0;9>=se;++se)le[ae++]=se;for(ae="a".charCodeAt(0),se=10;36>se;++se)le[ae++]=se;for(ae="A".charCodeAt(0),se=10;36>se;++se)le[ae++]=se;N.prototype.convert=D,N.prototype.revert=R,N.prototype.reduce=F,N.prototype.mulTo=x,N.prototype.sqrTo=O,L.prototype.convert=z,L.prototype.revert=V,L.prototype.reduce=j,L.prototype.mulTo=H,L.prototype.sqrTo=W,o.prototype.copyTo=u,o.prototype.fromInt=d,o.prototype.fromString=m,o.prototype.clamp=y,o.prototype.dlShiftTo=S,o.prototype.drShiftTo=C,o.prototype.lShiftTo=T,o.prototype.rShiftTo=P,o.prototype.subTo=A,o.prototype.multiplyTo=U,o.prototype.squareTo=k,o.prototype.divRemTo=M,o.prototype.invDigit=B,o.prototype.isEven=q,o.prototype.exp=Q,o.prototype.toString=b,o.prototype.negate=g,o.prototype.abs=v,o.prototype.compareTo=_,o.prototype.bitLength=E,o.prototype.mod=I,o.prototype.modPowInt=Y,o.ZERO=f(0),o.ONE=f(1),Z.prototype.doPublic=X,Z.prototype.setPublic=K,Z.prototype.encrypt=$;var ce={cipher:{},hash:{},keyexchange:{},mode:{},misc:{},codec:{},exception:{corrupt:function(t){this.toString=function(){return"CORRUPT: "+this.message},this.message=t},invalid:function(t){this.toString=function(){return"INVALID: "+this.message},this.message=t},bug:function(t){this.toString=function(){return"BUG: "+this.message},this.message=t},notReady:function(t){this.toString=function(){return"NOT READY: "+this.message},this.message=t}}};"undefined"!=typeof module&&module.exports&&(module.exports=ce),ce.cipher.aes=function(t){this._tables[0][0][0]||this._precompute();var e,n,i,r,o,a=this._tables[0][4],s=this._tables[1],h=t.length,l=1;if(4!==h&&6!==h&&8!==h)throw new ce.exception.invalid("invalid aes key size");for(this._key=[r=t.slice(0),o=[]],e=h;4*h+28>e;e++)i=r[e-1],(e%h===0||8===h&&e%h===4)&&(i=a[i>>>24]<<24^a[i>>16&255]<<16^a[i>>8&255]<<8^a[255&i],e%h===0&&(i=i<<8^i>>>24^l<<24,l=l<<1^283*(l>>7))),r[e]=r[e-h]^i;for(n=0;e;n++,e--)i=r[3&n?e:e-4],o[n]=4>=e||4>n?i:s[0][a[i>>>24]]^s[1][a[i>>16&255]]^s[2][a[i>>8&255]]^s[3][a[255&i]]},ce.cipher.aes.prototype={encrypt:function(t){return this._crypt(t,0)},decrypt:function(t){return this._crypt(t,1)},_tables:[[[],[],[],[],[]],[[],[],[],[],[]]],_precompute:function(){var t,e,n,i,r,o,a,s,h,l=this._tables[0],c=this._tables[1],p=l[4],u=c[4],d=[],f=[];for(t=0;256>t;t++)f[(d[t]=t<<1^283*(t>>7))^t]=t;for(e=n=0;!p[e];e^=i||1,n=f[n]||1)for(a=n^n<<1^n<<2^n<<3^n<<4,a=a>>8^255&a^99,p[e]=a,u[a]=e,o=d[r=d[i=d[e]]],h=16843009*o^65537*r^257*i^16843008*e,s=257*d[a]^16843008*a,t=0;4>t;t++)l[t][e]=s=s<<24^s>>>8,c[t][a]=h=h<<24^h>>>8;for(t=0;5>t;t++)l[t]=l[t].slice(0),c[t]=c[t].slice(0)},_crypt:function(t,e){if(4!==t.length)throw new ce.exception.invalid("invalid aes block size");var n,i,r,o,a=this._key[e],s=t[0]^a[0],h=t[e?3:1]^a[1],l=t[2]^a[2],c=t[e?1:3]^a[3],p=a.length/4-2,u=4,d=[0,0,0,0],f=this._tables[e],m=f[0],y=f[1],b=f[2],g=f[3],v=f[4];for(o=0;p>o;o++)n=m[s>>>24]^y[h>>16&255]^b[l>>8&255]^g[255&c]^a[u],i=m[h>>>24]^y[l>>16&255]^b[c>>8&255]^g[255&s]^a[u+1],r=m[l>>>24]^y[c>>16&255]^b[s>>8&255]^g[255&h]^a[u+2],c=m[c>>>24]^y[s>>16&255]^b[h>>8&255]^g[255&l]^a[u+3],u+=4,s=n,h=i,l=r;for(o=0;4>o;o++)d[e?3&-o:o]=v[s>>>24]<<24^v[h>>16&255]<<16^v[l>>8&255]<<8^v[255&c]^a[u++],n=s,s=h,h=l,l=c,c=n;return d}},ce.bitArray={bitSlice:function(t,e,n){return t=ce.bitArray._shiftRight(t.slice(e/32),32-(31&e)).slice(1),void 0===n?t:ce.bitArray.clamp(t,n-e)},extract:function(t,e,n){var i,r=Math.floor(-e-n&31);return i=-32&(e+n-1^e)?t[e/32|0]<<32-r^t[e/32+1|0]>>>r:t[e/32|0]>>>r,i&(1<<n)-1},concat:function(t,e){if(0===t.length||0===e.length)return t.concat(e);var n=t[t.length-1],i=ce.bitArray.getPartial(n);return 32===i?t.concat(e):ce.bitArray._shiftRight(e,i,0|n,t.slice(0,t.length-1))},bitLength:function(t){var e,n=t.length;return 0===n?0:(e=t[n-1],32*(n-1)+ce.bitArray.getPartial(e))},clamp:function(t,e){if(32*t.length<e)return t;t=t.slice(0,Math.ceil(e/32));var n=t.length;return e=31&e,n>0&&e&&(t[n-1]=ce.bitArray.partial(e,t[n-1]&2147483648>>e-1,1)),t},partial:function(t,e,n){return 32===t?e:(n?0|e:e<<32-t)+1099511627776*t},getPartial:function(t){return Math.round(t/1099511627776)||32},equal:function(t,e){if(ce.bitArray.bitLength(t)!==ce.bitArray.bitLength(e))return!1;var n,i=0;for(n=0;n<t.length;n++)i|=t[n]^e[n];return 0===i},_shiftRight:function(t,e,n,i){var r,o,a=0;for(void 0===i&&(i=[]);e>=32;e-=32)i.push(n),n=0;if(0===e)return i.concat(t);for(r=0;r<t.length;r++)i.push(n|t[r]>>>e),n=t[r]<<32-e;return a=t.length?t[t.length-1]:0,o=ce.bitArray.getPartial(a),i.push(ce.bitArray.partial(e+o&31,e+o>32?n:i.pop(),1)),i},_xor4:function(t,e){return[t[0]^e[0],t[1]^e[1],t[2]^e[2],t[3]^e[3]]}},ce.codec.hex={fromBits:function(t){var e,n="";for(e=0;e<t.length;e++)n+=((0|t[e])+0xf00000000000).toString(16).substr(4);return n.substr(0,ce.bitArray.bitLength(t)/4)},toBits:function(t){var e,n,i=[];for(t=t.replace(/\s|0x/g,""),n=t.length,t+="00000000",e=0;e<t.length;e+=8)i.push(0^parseInt(t.substr(e,8),16));return ce.bitArray.clamp(i,4*n)}},ce.codec.utf8String={fromBits:function(t){var e,n,i="",r=ce.bitArray.bitLength(t);for(e=0;r/8>e;e++)0===(3&e)&&(n=t[e/4]),i+=String.fromCharCode(n>>>24),n<<=8;return decodeURIComponent(escape(i))},toBits:function(t){t=unescape(encodeURIComponent(t));var e,n=[],i=0;for(e=0;e<t.length;e++)i=i<<8|t.charCodeAt(e),3===(3&e)&&(n.push(i),i=0);return 3&e&&n.push(ce.bitArray.partial(8*(3&e),i)),n}},ce.codec.base64={_chars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",fromBits:function(t,e,n){var i,r="",o=0,a=ce.codec.base64._chars,s=0,h=ce.bitArray.bitLength(t);for(n&&(a=a.substr(0,62)+"-_"),i=0;6*r.length<h;)r+=a.charAt((s^t[i]>>>o)>>>26),6>o?(s=t[i]<<6-o,o+=26,i++):(s<<=6,o-=6);for(;3&r.length&&!e;)r+="=";return r},toBits:function(t,e){t=t.replace(/\s|=/g,"");var n,i,r=[],o=0,a=ce.codec.base64._chars,s=0;for(e&&(a=a.substr(0,62)+"-_"),n=0;n<t.length;n++){if(i=a.indexOf(t.charAt(n)),0>i)throw new ce.exception.invalid("this isn't base64!");o>26?(o-=26,r.push(s^i>>>o),s=i<<32-o):(o+=6,s^=i<<32-o)}return 56&o&&r.push(ce.bitArray.partial(56&o,s,1)),r}},ce.codec.base64url={fromBits:function(t){return ce.codec.base64.fromBits(t,1,1)},toBits:function(t){return ce.codec.base64.toBits(t,1)}},void 0===ce.beware&&(ce.beware={}),ce.beware["CBC mode is dangerous because it doesn't protect message integrity."]=function(){ce.mode.cbc={name:"cbc",encrypt:function(t,e,n,i){if(i&&i.length)throw new ce.exception.invalid("cbc can't authenticate data");if(128!==ce.bitArray.bitLength(n))throw new ce.exception.invalid("cbc iv must be 128 bits");var r,o=ce.bitArray,a=o._xor4,s=o.bitLength(e),h=0,l=[];if(7&s)throw new ce.exception.invalid("pkcs#5 padding only works for multiples of a byte");for(r=0;s>=h+128;r+=4,h+=128)n=t.encrypt(a(n,e.slice(r,r+4))),l.splice(r,0,n[0],n[1],n[2],n[3]);return s=16843009*(16-(s>>3&15)),n=t.encrypt(a(n,o.concat(e,[s,s,s,s]).slice(r,r+4))),l.splice(r,0,n[0],n[1],n[2],n[3]),l},decrypt:function(t,e,n,i){if(i&&i.length)throw new ce.exception.invalid("cbc can't authenticate data");if(128!==ce.bitArray.bitLength(n))throw new ce.exception.invalid("cbc iv must be 128 bits");if(127&ce.bitArray.bitLength(e)||!e.length)throw new ce.exception.corrupt("cbc ciphertext must be a positive multiple of the block size");var r,o,a,s=ce.bitArray,h=s._xor4,l=[];for(i=i||[],r=0;r<e.length;r+=4)o=e.slice(r,r+4),a=h(n,t.decrypt(o)),l.splice(r,0,a[0],a[1],a[2],a[3]),n=o;if(o=255&l[r-1],0==o||o>16)throw new ce.exception.corrupt("pkcs#5 padding corrupt");if(a=16843009*o,!s.equal(s.bitSlice([a,a,a,a],0,8*o),s.bitSlice(l,32*l.length-8*o,32*l.length)))throw new ce.exception.corrupt("pkcs#5 padding corrupt");return s.bitSlice(l,0,32*l.length-8*o)}}},ce.misc.hmac=function(t,e){this._hash=e=e||ce.hash.sha256;var n,i=[[],[]],r=e.prototype.blockSize/32;for(this._baseHash=[new e,new e],t.length>r&&(t=e.hash(t)),n=0;r>n;n++)i[0][n]=909522486^t[n],i[1][n]=1549556828^t[n];this._baseHash[0].update(i[0]),this._baseHash[1].update(i[1])},ce.misc.hmac.prototype.encrypt=ce.misc.hmac.prototype.mac=function(t,e){var n=new this._hash(this._baseHash[0]).update(t,e).finalize();return new this._hash(this._baseHash[1]).update(n).finalize()},ce.hash.sha256=function(t){this._key[0]||this._precompute(),t?(this._h=t._h.slice(0),this._buffer=t._buffer.slice(0),this._length=t._length):this.reset()},ce.hash.sha256.hash=function(t){return(new ce.hash.sha256).update(t).finalize()},ce.hash.sha256.prototype={blockSize:512,reset:function(){return this._h=this._init.slice(0),this._buffer=[],this._length=0,this},update:function(t){"string"==typeof t&&(t=ce.codec.utf8String.toBits(t));var e,n=this._buffer=ce.bitArray.concat(this._buffer,t),i=this._length,r=this._length=i+ce.bitArray.bitLength(t);for(e=512+i&-512;r>=e;e+=512)this._block(n.splice(0,16));return this},finalize:function(){var t,e=this._buffer,n=this._h;for(e=ce.bitArray.concat(e,[ce.bitArray.partial(1,1)]),t=e.length+2;15&t;t++)e.push(0);for(e.push(Math.floor(this._length/4294967296)),e.push(0|this._length);e.length;)this._block(e.splice(0,16));return this.reset(),n},_init:[],_key:[],_precompute:function(){function t(t){return 4294967296*(t-Math.floor(t))|0}var e,n=0,i=2;t:for(;64>n;i++){for(e=2;i>=e*e;e++)if(i%e===0)continue t;8>n&&(this._init[n]=t(Math.pow(i,.5))),this._key[n]=t(Math.pow(i,1/3)),n++}},_block:function(t){var e,n,i,r,o=t.slice(0),a=this._h,s=this._key,h=a[0],l=a[1],c=a[2],p=a[3],u=a[4],d=a[5],f=a[6],m=a[7];for(e=0;64>e;e++)16>e?n=o[e]:(i=o[e+1&15],r=o[e+14&15],n=o[15&e]=(i>>>7^i>>>18^i>>>3^i<<25^i<<14)+(r>>>17^r>>>19^r>>>10^r<<15^r<<13)+o[15&e]+o[e+9&15]|0),n=n+m+(u>>>6^u>>>11^u>>>25^u<<26^u<<21^u<<7)+(f^u&(d^f))+s[e],m=f,f=d,d=u,u=p+n|0,p=c,c=l,l=h,h=n+(l&c^p&(l^c))+(l>>>2^l>>>13^l>>>22^l<<30^l<<19^l<<10)|0;a[0]=a[0]+h|0,a[1]=a[1]+l|0,a[2]=a[2]+c|0,a[3]=a[3]+p|0,a[4]=a[4]+u|0,a[5]=a[5]+d|0,a[6]=a[6]+f|0,a[7]=a[7]+m|0}},ce.random={randomWords:function(t,e){var n,i,r=[],o=this.isReady(e);if(o===this._NOT_READY)throw new ce.exception.notReady("generator isn't seeded");for(o&this._REQUIRES_RESEED&&this._reseedFromPools(!(o&this._READY)),n=0;t>n;n+=4)(n+1)%this._MAX_WORDS_PER_BURST===0&&this._gate(),i=this._gen4words(),r.push(i[0],i[1],i[2],i[3]);return this._gate(),r.slice(0,t)},setDefaultParanoia:function(t){this._defaultParanoia=t},addEntropy:function(t,e,n){n=n||"user";var i,r,o,a=(new Date).valueOf(),s=this._robins[n],h=this.isReady(),l=0;switch(i=this._collectorIds[n],void 0===i&&(i=this._collectorIds[n]=this._collectorIdNext++),void 0===s&&(s=this._robins[n]=0),this._robins[n]=(this._robins[n]+1)%this._pools.length,typeof t){case"number":void 0===e&&(e=1),this._pools[s].update([i,this._eventId++,1,e,a,1,0|t]);break;case"object":var c=Object.prototype.toString.call(t);if("[object Uint32Array]"===c){for(o=[],r=0;r<t.length;r++)o.push(t[r]);t=o}else for("[object Array]"!==c&&(l=1),r=0;r<t.length&&!l;r++)"number"!=typeof t[r]&&(l=1);if(!l){if(void 0===e)for(e=0,r=0;r<t.length;r++)for(o=t[r];o>0;)e++,o>>>=1;this._pools[s].update([i,this._eventId++,2,e,a,t.length].concat(t))}break;case"string":void 0===e&&(e=t.length),this._pools[s].update([i,this._eventId++,3,e,a,t.length]),this._pools[s].update(t);break;default:l=1}if(l)throw new ce.exception.bug("random: addEntropy only supports number, array of numbers or string");this._poolEntropy[s]+=e,this._poolStrength+=e,h===this._NOT_READY&&(this.isReady()!==this._NOT_READY&&this._fireEvent("seeded",Math.max(this._strength,this._poolStrength)),this._fireEvent("progress",this.getProgress()))},isReady:function(t){var e=this._PARANOIA_LEVELS[void 0!==t?t:this._defaultParanoia];return this._strength&&this._strength>=e?this._poolEntropy[0]>this._BITS_PER_RESEED&&(new Date).valueOf()>this._nextReseed?this._REQUIRES_RESEED|this._READY:this._READY:this._poolStrength>=e?this._REQUIRES_RESEED|this._NOT_READY:this._NOT_READY},getProgress:function(t){var e=this._PARANOIA_LEVELS[t?t:this._defaultParanoia];return this._strength>=e?1:this._poolStrength>e?1:this._poolStrength/e},startCollectors:function(){if(!this._collectorsStarted){if(window.addEventListener)window.addEventListener("load",this._loadTimeCollector,!1),window.addEventListener("mousemove",this._mouseCollector,!1);else{if(!document.attachEvent)throw new ce.exception.bug("can't attach event");document.attachEvent("onload",this._loadTimeCollector),document.attachEvent("onmousemove",this._mouseCollector)}this._collectorsStarted=!0}},stopCollectors:function(){this._collectorsStarted&&(window.removeEventListener?(window.removeEventListener("load",this._loadTimeCollector,!1),window.removeEventListener("mousemove",this._mouseCollector,!1)):window.detachEvent&&(window.detachEvent("onload",this._loadTimeCollector),window.detachEvent("onmousemove",this._mouseCollector)),this._collectorsStarted=!1)},addEventListener:function(t,e){this._callbacks[t][this._callbackI++]=e},removeEventListener:function(t,e){var n,i,r=this._callbacks[t],o=[];for(i in r)r.hasOwnProperty(i)&&r[i]===e&&o.push(i);for(n=0;n<o.length;n++)i=o[n],delete r[i]},_pools:[new ce.hash.sha256],_poolEntropy:[0],_reseedCount:0,_robins:{},_eventId:0,_collectorIds:{},_collectorIdNext:0,_strength:0,_poolStrength:0,_nextReseed:0,_key:[0,0,0,0,0,0,0,0],_counter:[0,0,0,0],_cipher:void 0,_defaultParanoia:6,_collectorsStarted:!1,_callbacks:{progress:{},seeded:{}},_callbackI:0,_NOT_READY:0,_READY:1,_REQUIRES_RESEED:2,_MAX_WORDS_PER_BURST:65536,_PARANOIA_LEVELS:[0,48,64,96,128,192,256,384,512,768,1024],_MILLISECONDS_PER_RESEED:3e4,_BITS_PER_RESEED:80,_gen4words:function(){for(var t=0;4>t&&(this._counter[t]=this._counter[t]+1|0,!this._counter[t]);t++);return this._cipher.encrypt(this._counter)},_gate:function(){this._key=this._gen4words().concat(this._gen4words()),this._cipher=new ce.cipher.aes(this._key)},_reseed:function(t){this._key=ce.hash.sha256.hash(this._key.concat(t)),this._cipher=new ce.cipher.aes(this._key);for(var e=0;4>e&&(this._counter[e]=this._counter[e]+1|0,!this._counter[e]);e++);},_reseedFromPools:function(t){var e,n=[],i=0;for(this._nextReseed=n[0]=(new Date).valueOf()+this._MILLISECONDS_PER_RESEED,e=0;16>e;e++)n.push(4294967296*Math.random()|0);for(e=0;e<this._pools.length&&(n=n.concat(this._pools[e].finalize()),i+=this._poolEntropy[e],this._poolEntropy[e]=0,t||!(this._reseedCount&1<<e));e++);this._reseedCount>=1<<this._pools.length&&(this._pools.push(new ce.hash.sha256),this._poolEntropy.push(0)),this._poolStrength-=i,i>this._strength&&(this._strength=i),this._reseedCount++,this._reseed(n)},_mouseCollector:function(t){var e=t.x||t.clientX||t.offsetX||0,n=t.y||t.clientY||t.offsetY||0;ce.random.addEntropy([e,n],2,"mouse")},_loadTimeCollector:function(){ce.random.addEntropy((new Date).valueOf(),2,"loadtime")},_fireEvent:function(t,e){var n,i=ce.random._callbacks[t],r=[];for(n in i)i.hasOwnProperty(n)&&r.push(i[n]);for(n=0;n<r.length;n++)r[n](e)}},function(){try{var t=new Uint32Array(32);crypto.getRandomValues(t),ce.random.addEntropy(t,1024,"crypto.getRandomValues")}catch(e){}}(),function(){for(var t in ce.beware)ce.beware.hasOwnProperty(t)&&ce.beware[t]()}();var pe={sjcl:ce,version:"1.3.10"};pe.generateAesKey=function(){return{key:ce.random.randomWords(8,0),encrypt:function(t){return this.encryptWithIv(t,ce.random.randomWords(4,0))},encryptWithIv:function(t,e){var n=new ce.cipher.aes(this.key),i=ce.codec.utf8String.toBits(t),r=ce.mode.cbc.encrypt(n,i,e),o=ce.bitArray.concat(e,r);return ce.codec.base64.fromBits(o)}}},pe.create=function(t){return new pe.EncryptionClient(t)},pe.EncryptionClient=function(t){var i=this,o=[];i.publicKey=t,i.version=pe.version;var a=function(t,e){var n,i,r;n=document.createElement(t);for(i in e)e.hasOwnProperty(i)&&(r=e[i],n.setAttribute(i,r));return n},s=function(t){return window.jQuery&&t instanceof jQuery?t[0]:t.nodeType&&1===t.nodeType?t:document.getElementById(t)},h=function(t){var e,n,i,r,o=[];if("INTEGER"===t.typeName()&&(e=t.posContent(),n=t.posEnd(),i=t.stream.hexDump(e,n).replace(/[ \n]/g,""),o.push(i)),null!==t.sub)for(r=0;r<t.sub.length;r++)o=o.concat(h(t.sub[r]));return o},l=function(t){var e,n,i=[],r=t.children;for(n=0;n<r.length;n++)e=r[n],1===e.nodeType&&e.attributes["data-encrypted-name"]?i.push(e):e.children&&e.children.length>0&&(i=i.concat(l(e)));return i},c=function(){var n,i,o,a,s,l;try{s=r(t),n=e.decode(s)}catch(c){throw"Invalid encryption key. Please use the key labeled 'Client-Side Encryption Key'"}if(o=h(n),2!==o.length)throw"Invalid encryption key. Please use the key labeled 'Client-Side Encryption Key'";return a=o[0],i=o[1],l=new Z,l.setPublic(a,i),l},p=function(){return{key:ce.random.randomWords(8,0),sign:function(t){var e=new ce.misc.hmac(this.key,ce.hash.sha256),n=e.encrypt(t);return ce.codec.base64.fromBits(n)}}};i.encrypt=function(t){var e=c(),r=pe.generateAesKey(),o=p(),a=r.encrypt(t),s=o.sign(ce.codec.base64.toBits(a)),h=ce.bitArray.concat(r.key,o.key),l=ce.codec.base64.fromBits(h),u=e.encrypt(l),d="$bt4|javascript_"+i.version.replace(/\./g,"_")+"$",f=null;return u&&(f=n(u)),d+f+"$"+a+"$"+s},i.encryptForm=function(t){var e,n,r,h,c,p;for(t=s(t),p=l(t);o.length>0;){try{t.removeChild(o[0])}catch(u){}o.splice(0,1)}for(c=0;c<p.length;c++)e=p[c],r=e.getAttribute("data-encrypted-name"),n=i.encrypt(e.value),e.removeAttribute("name"),h=a("input",{value:n,type:"hidden",name:r}),o.push(h),t.appendChild(h)},i.onSubmitEncryptForm=function(t,e){var n;t=s(t),n=function(n){return i.encryptForm(t),e?e(n):n},window.jQuery?window.jQuery(t).submit(n):t.addEventListener?t.addEventListener("submit",n,!1):t.attachEvent&&t.attachEvent("onsubmit",n)},i.formEncrypter={encryptForm:i.encryptForm,extractForm:s,onSubmitEncryptForm:i.onSubmitEncryptForm},ce.random.startCollectors()},window.Braintree=pe,"function"==typeof define&&define("braintree",function(){return pe
})}(),function(){function t(t){switch(t){case null:case void 0:return"";case!0:return"1";case!1:return"0";default:return encodeURIComponent(t)}}var e=window||e,n=e.braintree||{},i=n.Utils||{};i.makeQueryString=function(e,n){var r,o,a=[];for(o in e)if(e.hasOwnProperty(o)){var s=e[o];r=n?n+"["+o+"]":o,"object"==typeof s?a.push(i.makeQueryString(s,r)):void 0!==s&&null!==s&&a.push(t(r)+"="+t(s))}return a.join("&")},i.decodeQueryString=function(t){for(var e={},n=t.split("&"),i=0;i<n.length;i++){var r=n[i].split("="),o=r[0],a=decodeURIComponent(r[1]);e[o]=a}return e},i.getParams=function(t){var e=t.split("?");return 2!==e.length?{}:n.Utils.decodeQueryString(e[1])},i.isFunction=function(t){return"[object Function]"===Object.prototype.toString.call(t)},i.bind=function(t,e){return function(){t.apply(e,arguments)}},i.addEventListener=function(t,e,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent&&t.attachEvent("on"+e,n)},i.removeEventListener=function(t,e,n){t.removeEventListener?t.removeEventListener(e,n,!1):t.detachEvent&&t.detachEvent("on"+e,n)},i.normalizeElement=function(t,e){if(e=e||"["+t+"] is not a valid DOM Element",t&&t.nodeType&&1===t.nodeType)return t;if(t&&window.jQuery&&t instanceof jQuery&&0!==t.length)return t[0];if("string"==typeof t&&document.getElementById(t))return document.getElementById(t);throw new Error(e)},i.isBrowserHttps=function(){return"https:"===window.location.protocol},n.Utils=i,e.braintree=n}(),function(){function t(t){this.host=t||window,this.handlers=[],n.Utils.addEventListener(this.host,"message",n.Utils.bind(this.receive,this))}var e=window||e,n=e.braintree||{};t.prototype.receive=function(e){var n,i,r,o;try{r=JSON.parse(e.data)}catch(a){return}for(o=r.type,i=new t.Message(this,e.source,r.data),n=0;n<this.handlers.length;n++)this.handlers[n].type===o&&this.handlers[n].handler(i)},t.prototype.send=function(t,e,n){t.postMessage(JSON.stringify({type:e,data:n}),"*")},t.prototype.register=function(t,e){this.handlers.push({type:t,handler:e})},t.prototype.unregister=function(t,e){for(var n=this.handlers.length-1;n>=0;n--)if(this.handlers[n].type===t&&this.handlers[n].handler===e)return this.handlers.splice(n,1)},t.Message=function(t,e,n){this.bus=t,this.source=e,this.content=n},t.Message.prototype.reply=function(t,e){this.bus.send(this.source,t,e)},n.MessageBus=t,e.braintree=n}(),function(){function t(t){this.bus=t,this.methods={},this.bus.register("rpc_request",n.Utils.bind(this._handleRequest,this))}var e=window||e,n=e.braintree||{};t.prototype._handleRequest=function(t){var e,n=t.content,i=n.args||[],r=this.methods[n.method];"function"==typeof r&&(e=function(){t.reply("rpc_response",{id:n.id,response:Array.prototype.slice.call(arguments)})},i.push(e),r.apply(null,i))},t.prototype.define=function(t,e){this.methods[t]=e},n.RPCServer=t,e.braintree=n}(),function(){function t(t,e){this.bus=t,this.target=e||window.parent,this.counter=0,this.callbacks={},this.bus.register("rpc_response",n.Utils.bind(this._handleResponse,this))}var e=window||e,n=e.braintree||{};t.prototype._handleResponse=function(t){var e=t.content,n=this.callbacks[e.id];"function"==typeof n&&(n.apply(null,e.response),delete this.callbacks[e.id])},t.prototype.invoke=function(t,e,n){var i=this.counter++;this.callbacks[i]=n,this.bus.send(this.target,"rpc_request",{id:i,method:t,args:e})},n.RPCClient=t,e.braintree=n}(),function(t){"use strict";var e=t.braintree||{};e.api=e.api||{},e.api.configure=function(t){return new e.api.Client(t)},e.api.parseClientToken=function(t){var e;if(!t)throw new Error("Braintree API Client Misconfigured: clientToken required.");if("object"==typeof t&&null!==t)e=t;else{try{t=atob(t)}catch(n){}try{e=JSON.parse(t)}catch(i){throw new Error("Braintree API Client Misconfigured: clientToken is invalid.")}}if(!e.hasOwnProperty("authUrl")||!e.hasOwnProperty("clientApiUrl"))throw new Error("Braintree API Client Misconfigured: clientToken is invalid.");return e},t.braintree=e}(this),function(t){"use strict";function e(t,e){return t.status>=400?[t,null]:[null,e(t)]}function n(t){var e;this.attrs={},t.hasOwnProperty("sharedCustomerIdentifier")&&(this.attrs.sharedCustomerIdentifier=t.sharedCustomerIdentifier),e=r.api.parseClientToken(t.clientToken),this.driver=t.driver||r.api.JSONPDriver,this.authUrl=e.authUrl,this.analyticsUrl=e.analytics?e.analytics.url:void 0,this.clientApiUrl=e.clientApiUrl,this.customerId=t.customerId,this.challenges=e.challenges,this.integration=t.integration||"",this.attrs.authorizationFingerprint=e.authorizationFingerprint,this.attrs.sharedCustomerIdentifierType=t.sharedCustomerIdentifierType,this.timeoutWatchers=[],this.requestTimeout=t.hasOwnProperty("timeout")?t.timeout:6e4}function i(t,e){var n,i={};for(n in t)t.hasOwnProperty(n)&&(i[n]=t[n]);for(n in e)e.hasOwnProperty(n)&&(i[n]=e[n]);return i}var r=t.braintree||{};r.api=r.api||{},n.prototype.requestWithTimeout=function(t,n,i,o,a){var s=this;n.braintreeLibraryVersion="braintree/web/"+r.version,n._meta={integration:this.integration};var h=o(t,n,function(t,n){if(s.timeoutWatchers[n]){clearTimeout(s.timeoutWatchers[n]);var r=e(t,function(t){return i(t)});a.apply(null,r)}});s.requestTimeout>0?this.timeoutWatchers[h]=setTimeout(function(){s.timeoutWatchers[h]=null,a.apply(null,[{errors:"Unknown error"},null])},s.requestTimeout):a.apply(null,[{errors:"Unknown error"},null])},n.prototype.post=function(t,e,n,i){this.requestWithTimeout(t,e,n,this.driver.post,i)},n.prototype.get=function(t,e,n,i){this.requestWithTimeout(t,e,n,this.driver.get,i)},n.prototype.put=function(t,e,n,i){this.requestWithTimeout(t,e,n,this.driver.put,i)},n.prototype.getCreditCards=function(e){this.get(r.api.util.joinUrlFragments([this.clientApiUrl,"v1","payment_methods"]),this.attrs,function(e){var n=0,i=e.paymentMethods.length,r=[];for(n;i>n;n++)r.push(new t.braintree.api.CreditCard(e.paymentMethods[n]));return r},e)},n.prototype.tokenizeCard=function(t,e){t.options={validate:!1},this.addCreditCard(t,function(t,n){n&&n.nonce?e(t,n.nonce):e("Unable to tokenize card.",null)})},n.prototype.addSEPAMandate=function(e,n){var o=i(this.attrs,{sepaMandate:e});this.post(r.api.util.joinUrlFragments([this.clientApiUrl,"v1","sepa_mandates.json"]),o,function(e){return new t.braintree.api.SEPAMandate(e.sepaMandates[0])},n)},n.prototype.acceptSEPAMandate=function(e,n){this.put(r.api.util.joinUrlFragments([this.clientApiUrl,"v1","sepa_mandates",e,"accept"]),this.attrs,function(e){return new t.braintree.api.SEPABankAccount(e.sepaBankAccounts[0])},n)},n.prototype.getSEPAMandate=function(e,n){var o;o=e.paymentMethodToken?i(this.attrs,{paymentMethodToken:e.paymentMethodToken}):this.attrs,this.get(r.api.util.joinUrlFragments([this.clientApiUrl,"v1","sepa_mandates",e.mandateReferenceNumber||""]),o,function(e){return new t.braintree.api.SEPAMandate(e.sepaMandates[0])},n)},n.prototype.addCreditCard=function(e,n){var o=e.share;delete e.share;var a=i(this.attrs,{share:o,creditCard:e});this.post(r.api.util.joinUrlFragments([this.clientApiUrl,"v1","payment_methods/credit_cards"]),a,function(e){return new t.braintree.api.CreditCard(e.creditCards[0])},n)},n.prototype.unlockCreditCard=function(e,n,o){var a=i(this.attrs,{challengeResponses:n});this.put(r.api.util.joinUrlFragments([this.clientApiUrl,"v1","payment_methods/",e.nonce]),a,function(e){return new t.braintree.api.CreditCard(e.paymentMethods[0])},o)},n.prototype.sendAnalyticsEvents=function(n,r){var o,a,s,h=this,l=[];if(n=t.braintree.api.util.isArray(n)?n:[n],!this.analyticsUrl)return void(r&&r.apply(null,[null,{}]));for(var c in n)n.hasOwnProperty(c)&&l.push({kind:n[c]});o=this.analyticsUrl,a=i(this.attrs,{analytics:l}),s=this.driver.post(o,a,function(t,n){if(h.timeoutWatchers[n]){clearTimeout(h.timeoutWatchers[n]);var i=e(t,function(t){return t});r&&r.apply(null,i)}}),this.timeoutWatchers[s]=setTimeout(function(){h.timeoutWatchers[s]=null,r.apply(null,[{errors:"Unknown error"},null])},this.requestTimeout)},r.api.Client=n,t.braintree=r}(this),function(t){"use strict";function e(t){for(var e=0;e<i.length;e++){var n=i[e];this[n]=t[n]}}var n=t.braintree||{};n.api=n.api||{};var i=["billingAddress","branding","createdAt","createdAtMerchant","createdAtMerchantName","details","isLocked","lastUsedAt","lastUsedAtMerchant","lastUsedAtMerchantName","lastUsedByCurrentMerchant","nonce","securityQuestions","type"];n.api.CreditCard=e,t.braintree=n}(this),function(t){"use strict";var e=t.braintree||{};e.api=e.api||{},e.api.JSONPDriver={},e.api.JSONPDriver.get=function(t,n,i){return e.api.JSONP.get(t,n,i)},e.api.JSONPDriver.post=function(t,n,i){return n._method="POST",e.api.JSONP.get(t,n,i)},e.api.JSONPDriver.put=function(t,n,i){return n._method="PUT",e.api.JSONP.get(t,n,i)},t.braintree=e}(this),function(t){function e(t,e){var n=document.createElement("script"),i=!1;n.src=t,n.async=!0;var r=e||l.error;"function"==typeof r&&(n.onerror=function(e){r({url:t,event:e})}),n.onload=n.onreadystatechange=function(){i||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(i=!0,n.onload=n.onreadystatechange=null,n&&n.parentNode&&n.parentNode.removeChild(n))},a||(a=document.getElementsByTagName("head")[0]),a.appendChild(n)}function n(t,e){var i,r,a=[];for(var r in t)v=t[r],i=e?o.api.util.isArray(t)?e+"[]":e+"["+r+"]":r,a.push("object"==typeof v?n(v,i):encodeURIComponent(i)+"="+encodeURIComponent(v));return a.join("&")}function i(t,i,r,o){var a=-1===(t||"").indexOf("?")?"?":"&";o=o||l.callbackName||"callback";var c=o+"_json"+ ++s;return a+=n(i),h[c]=function(t){r(t,c);try{delete h[c]}catch(e){}h[c]=null},e(t+a+"&"+o+"="+c),c}function r(t){l=t}var o=t.braintree||{};o.api=o.api||{};var a,s=0,h=this,l={};o.api.JSONP={get:i,init:r,stringify:n},t.braintree=o}(this),function(t){"use strict";t.atob=t.atob||function(t){var e=new RegExp("^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=|[A-Za-z0-9+/]{4})([=]{1,2})?$"),n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i="";if(!e.test(t))throw new Error("Braintree API Client Misconfigured: clientToken is invalid.");var r=0;do{var o=n.indexOf(t.charAt(r++)),a=n.indexOf(t.charAt(r++)),s=n.indexOf(t.charAt(r++)),h=n.indexOf(t.charAt(r++)),l=(63&o)<<2|a>>4&3,c=(15&a)<<4|s>>2&15,p=(3&s)<<6|63&h;i+=String.fromCharCode(l)+(c?String.fromCharCode(c):"")+(p?String.fromCharCode(p):"")}while(r<t.length);return i}}(this),function(t){"use strict";function e(t){for(var e=0;e<i.length;e++){var n=i[e];this[n]=t[n]}}var n=t.braintree||{};n.api=n.api||{};var i=["bic","maskedIBAN","nonce","accountHolderName"];n.api.SEPABankAccount=e,t.braintree=n}(this),function(t){"use strict";function e(t){for(var e=0;e<i.length;e++){var n=i[e];this[n]=t[n]}}var n=t.braintree||{};n.api=n.api||{};var i=["accountHolderName","bic","longFormURL","mandateReferenceNumber","maskedIBAN","shortForm"];n.api.SEPAMandate=e,t.braintree=n}(this),function(t){"use strict";var e=t.braintree||{};e.api=e.api||{},e.api.testing={},e.api.testing.createClient=function(n,i){var r=n.driver||e.api.JSONPDriver,o=n.sharedCustomerIdentifier||Math.random()+"",a=e.api.util.joinUrlFragments([t.GATEWAY_HOST+":"+t.GATEWAY_PORT,"merchants",n.merchantId]),s={merchantId:n.merchantId,publicKey:n.publicKey,customer:n.customer,sharedCustomerIdentifierType:"testing",sharedCustomerIdentifier:o,baseUrl:a};n.creditCard&&(s.creditCard=n.creditCard),n.SEPAMandateType&&(s.sepaMandateType=n.SEPAMandateType),r.post(e.api.util.joinUrlFragments([a,"client_api/testing/setup"]),s,function(t){n.clientToken=JSON.stringify({authUrl:"fake_auth_url",clientApiUrl:e.api.util.joinUrlFragments([a,"client_api"]),authorizationFingerprint:t.authorizationFingerprint,analytics:n&&n.analytics?n.analytics:{}}),n.sharedCustomerIdentifier=o,n.sharedCustomerIdentifierType="testing",n.customerId=t.token;var r=new e.api.Client(n);i(r)})},t.braintree=e}(this),function(t){"use strict";function e(){}var n=t.braintree||{};n.api=n.api||{},e.prototype.joinUrlFragments=function(t){var e,n,i=[];for(n=0;n<t.length;n++)e=t[n],"/"===e.charAt(e.length-1)&&(e=e.substring(0,e.length-1)),"/"===e.charAt(0)&&(e=e.substring(1)),i.push(e);return i.join("/")},e.prototype.isArray=function(t){return t&&"object"==typeof t&&"number"==typeof t.length&&"[object Array]"===Object.prototype.toString.call(t)||!1},n.api.util=new e}(this),function(t){"use strict";var e="1.0.0",n=t.braintree||{};n.api=n.api||{},n.api.version=e}(this),function(t){"use strict";function e(t){if("object"==typeof t)return t;var e="payment_method_nonce";"string"==typeof t&&(e=t);var n=document.createElement("input");return n.name=e,n.type="hidden",n}function n(t){for(var e=t.getElementsByTagName("*"),n={},i=0;i<e.length;i++){var r=e[i].getAttribute("data-braintree-name");n[r]=!0}if(!n.number)throw'Unable to find an input with data-braintree-name="number" in your form. Please add one.';if(n.expiration_date){if(n.expiration_month||n.expiration_year)throw'You have inputs with data-braintree-name="expiration_date" AND data-braintree-name="expiration_(year|month)". Please use either "expiration_date" or "expiration_year" and "expiration_month".'}else{if(!n.expiration_month&&!n.expiration_year)throw'Unable to find an input with data-braintree-name="expiration_date" in your form. Please add one.';if(!n.expiration_month)throw'Unable to find an input with data-braintree-name="expiration_month" in your form. Please add one.';if(!n.expiration_year)throw'Unable to find an input with data-braintree-name="expiration_year" in your form. Please add one.'}}var i=t.braintree||{};i.Form=function(t,e,n){this.client=t,this.htmlForm=e,this.paymentMethodNonce=n},i.Form.setup=function(t,r){var o=document.getElementById(r.id);if(!o)throw'Unable to find form with id: "'+r.id+'"';n(o);var a=e(r.paymentMethodNonceInputField);o.appendChild(a);var s=new i.Form(t,o,a);return s.hijackForm(),s},i.Form.prototype.registerAsyncTaskOnSubmit=function(t,e){function n(n){n.preventDefault?n.preventDefault():n.returnValue=!1,e(function(){r(),"function"==typeof t.submit?t.submit():setTimeout(function(){t.querySelector('[type="submit"]').click()},1)})}function i(){t.addEventListener?t.addEventListener("submit",n):t.attachEvent&&t.attachEvent("onsubmit",n)}function r(){t.removeEventListener?t.removeEventListener("submit",n):t.detachEvent&&t.detachEvent("onsubmit",n)}i()},i.Form.prototype.hijackForm=function(){var t=this;this.registerAsyncTaskOnSubmit(this.htmlForm,function(e){return t.paymentMethodNonce.value&&""!==t.paymentMethodNonce.value?void e():void t.client.tokenizeCard(t.extractValues(t.htmlForm),function(n,i){if(n)throw"Unable to process payments at this time.";t.paymentMethodNonce.value=i,e()})})},i.Form.prototype.extractValues=function(t,e){e=e||{};var n,i,r=t.children;for(i=0;i<r.length;i++)if(n=r[i],1===n.nodeType&&n.attributes["data-braintree-name"]){var o=n.getAttribute("data-braintree-name");"postal_code"===o?e.billingAddress={postalCode:n.value}:e[o]=n.value,this.scrubAttributes(n)}else n.children&&n.children.length>0&&this.extractValues(n,e);return e},i.Form.prototype.scrubAttributes=function(t){try{t.attributes.removeNamedItem("name")}catch(e){}},t.braintree=i}(this),function(){"use strict";!function(){var t=window.braintree||{};t.paypal=t.paypal||{},window.braintree=t}(),function(){braintree.paypal.VERSION="1.0.1",braintree.paypal.constants={POPUP_NAME:"braintree_paypal_popup",FRAME_NAME:"braintree-paypal-frame",POPUP_PATH:"/pwpp/1.0.1/html/braintree-frame.html",POPUP_OPTIONS:"height=470,width=410,resizable=true"}}(),function(){braintree.paypal.browser={};var t=window.navigator.userAgent,e=/[Mm]obi|tablet|iOS|Android|IEMobile|Windows\sPhone/,n=/Chrome|Safari|Firefox/;braintree.paypal.browser.DEFAULT_POPUP_TARGET="braintree_paypal_external_popup",braintree.paypal.browser.DEFAULT_POPUP_HEIGHT=600,braintree.paypal.browser.DEFAULT_POPUP_WIDTH=800,braintree.paypal.browser.isMobile=function(){return braintree.paypal.browser.isMobileDevice()&&window.outerWidth<600},braintree.paypal.browser.isMobileDevice=function(){return e.test(t)},braintree.paypal.browser.isTouchDevice=function(){return"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch},braintree.paypal.browser.detectedPostMessage=function(){return!!window.postMessage},braintree.paypal.browser.isPopupSupportedBrowser=function(){return n.test(t)},braintree.paypal.browser.isPopupSupported=function(){return braintree.paypal.browser.isMobileDevice()||braintree.paypal.browser.isTouchDevice()?!1:braintree.paypal.browser.isPopupSupportedBrowser()?!0:!1},braintree.paypal.browser.popup=function(t,e){e||(e={}),e.target=e.target||t.target||braintree.paypal.browser.DEFAULT_POPUP_TARGET,e.height=e.height||braintree.paypal.browser.DEFAULT_POPUP_HEIGHT,e.width=e.width||braintree.paypal.browser.DEFAULT_POPUP_WIDTH;var n="undefined"!=typeof t.href?t.href:String(t),i=e.target||t.target,r=[];for(var o in e)if(e.hasOwnProperty(o))switch(o){case"width":case"height":case"top":case"left":r.push(o+"="+e[o]);break;case"target":case"noreferrer":break;default:r.push(o+"="+(e[o]?1:0))}var a=r.join(","),s=window.open(n,i,a);return s?(s.focus(),!1):!0}}(),function(){braintree.paypal.dom={},braintree.paypal.dom.setTextContent=function(t,e){var n="innerText";document&&document.body&&"textContent"in document.body&&(n="textContent"),t[n]=e},braintree.paypal.dom.normalizeElement=function(t){if(t&&t.nodeType&&1===t.nodeType)return t;if(t&&window.jQuery&&t instanceof jQuery&&0!==t.length)return t[0];if("string"==typeof t&&document.getElementById(t))return document.getElementById(t);throw new Error("["+t+"] is not a valid DOM Element")}}(),function(){braintree.paypal.util={},braintree.paypal.util.trim="function"==typeof String.prototype.trim?function(t){return t.trim()}:function(t){return t.replace(/^\s+|\s+$/,"")},braintree.paypal.util.btoa="function"==typeof window.btoa?function(t){return window.btoa(t)}:function(t){for(var e,n,i,r,o,a,s,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l="",c=0;c<t.length;)e=t.charCodeAt(c++),n=t.charCodeAt(c++),i=t.charCodeAt(c++),r=e>>2,o=(3&e)<<4|n>>4,a=(15&n)<<2|i>>6,s=63&i,isNaN(n)?a=s=64:isNaN(i)&&(s=64),l=l+h.charAt(r)+h.charAt(o)+h.charAt(a)+h.charAt(s);return l},braintree.paypal.util.generateUid=function(){for(var t="",e=0;32>e;e++){var n=Math.floor(16*Math.random());t+=n.toString(16)}return t},braintree.paypal.util.castToBoolean=function(t){return/^(true|1)$/i.test(t)},braintree.paypal.util.htmlEscape=function(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;").replace(/\'/g,"&apos;")}}(),function(){braintree.paypal.create=function(t,e){if(!braintree.paypal.browser.detectedPostMessage())return void("function"==typeof e.onUnsupported&&e.onUnsupported(new Error("unsupported browser detected")));var n=new braintree.paypal.Client(t,e);return n.initialize(),n}}(),function(){function t(t){this.options=t,this.container=this.createViewContainer(),this.createPayPalName(),this.emailNode=this.createEmailNode(),this.logoutNode=this.createLogoutNode()}t.prototype.createViewContainer=function(){var t=document.createElement("div");t.id="braintree-paypal-loggedin";var e=["display: none","max-width: 500px","overflow: hidden","padding: 16px","background-image: url("+this.options.assetsUrl+"/pwpp/"+braintree.paypal.VERSION+"/images/paypal-small.png)","background-image: url("+this.options.assetsUrl+"/pwpp/"+braintree.paypal.VERSION+"/images/paypal-small.svg), none","background-position: 20px 50%","background-repeat: no-repeat","background-size: 13px 15px","border-top: 1px solid #d1d4d6","border-bottom: 1px solid #d1d4d6"].join(";");return t.style.cssText=e,this.options.container.appendChild(t),t},t.prototype.createPayPalName=function(){var t=document.createElement("span");t.id="bt-pp-name",t.innerHTML="PayPal";var e=["color: #283036","font-size: 13px","font-weight: 800",'font-family: "Helvetica Neue", Helvetica, Arial, sans-serif',"margin-left: 36px","-webkit-font-smoothing: antialiased","-moz-font-smoothing: antialiased","-ms-font-smoothing: antialiased","font-smoothing: antialiased"].join(";");return t.style.cssText=e,this.container.appendChild(t)},t.prototype.createEmailNode=function(){var t=document.createElement("span");t.id="bt-pp-email";var e=["color: #6e787f","font-size: 13px",'font-family: "Helvetica Neue", Helvetica, Arial, sans-serif',"margin-left: 5px","-webkit-font-smoothing: antialiased","-moz-font-smoothing: antialiased","-ms-font-smoothing: antialiased","font-smoothing: antialiased"].join(";");return t.style.cssText=e,this.container.appendChild(t)},t.prototype.createLogoutNode=function(){var t=document.createElement("button");t.id="bt-pp-cancel",t.innerHTML="Cancel";var e=["color: #3d95ce","font-size: 11px",'font-family: "Helvetica Neue", Helvetica, Arial, sans-serif',"line-height: 20px","margin: 0 0 0 25px","padding: 0","background-color: transparent","border: 0","cursor: pointer","text-decoration: underline","float: right","-webkit-font-smoothing: antialiased","-moz-font-smoothing: antialiased","-ms-font-smoothing: antialiased","font-smoothing: antialiased"].join(";");return t.style.cssText=e,this.container.appendChild(t)},t.prototype.show=function(){this.container.style.display="block"},t.prototype.hide=function(){this.container.style.display="none"},braintree.paypal.LoggedInView=t}(),function(){function t(t){this.options=t,this.assetsUrl=this.options.assetsUrl,this.container=this.createViewContainer(),this.buttonNode=this.createPayWithPayPalButton()}t.prototype.createViewContainer=function(){var t=document.createElement("div");return t.id="braintree-paypal-loggedout",this.options.container.appendChild(t),t},t.prototype.createPayWithPayPalButton=function(){var t=document.createElement("a");t.id="braintree-paypal-button",t.href="#";var e=["display: block","width: 115px","height: 44px","overflow: hidden"].join(";");t.style.cssText=e;var n=new Image;n.src=this.assetsUrl+"/pwpp/"+braintree.paypal.VERSION+"/images/pay-with-paypal.png",n.setAttribute("alt","Pay with PayPal");var i=["max-width: 100%","display: block","width: 100%","height: 100%","outline: none","border: 0"].join(";");return n.style.cssText=i,t.appendChild(n),this.container.appendChild(t)},t.prototype.show=function(){this.container.style.display="block"},t.prototype.hide=function(){this.container.style.display="none"},braintree.paypal.LoggedOutView=t}(),function(){function t(t){var e=window.getComputedStyle?getComputedStyle(t):t.currentStyle;return{overflow:e.overflow||"",height:t.style.height||""}}function e(){return{html:{node:document.documentElement,styles:t(document.documentElement)},body:{node:document.body,styles:t(document.body)}}}function n(t,e){e=e||{},this.clientToken=t,this.parsedClientToken=this._parseClientToken(t),this.parsedClientToken&&e.displayName&&(this.parsedClientToken.paypalDisplayName=e.displayName),this.locale=e.locale||"en",this.singleUse=e.singleUse||!1,this.demoMode=e.demo||!1,this.integration=e.integration||"",this.container=e.container,this.merchantPageDefaultStyles=null,this.paymentMethodNonceInputField=e.paymentMethodNonceInputField,this.frame=null,this.popup=null,this.communicationFrame=null,this.windowResizeListener=braintree.Utils.bind(this._handleWindowResize,this),this.insertFrameFunction=e.insertFrame,this.onSuccess=e.onSuccess,this.onCancelled=e.onCancelled,this.onUnsupported=e.onUnsupported,this.rpcServer=null,this.loggedInView=null,this.loggedOutView=null,this.insertUI=!0}n.prototype.initialize=function(){return this._isPayPalEnabled()?this._hasSecureBrowserProtocol()?(this._setupDomElements(),this._setupPaymentMethodNonceInputField(),this._setupViews(),void this._setupRPCServer()):void("function"==typeof this.onUnsupported&&this.onUnsupported(new Error("unsupported protocol detected"))):void("function"==typeof this.onUnsupported&&this.onUnsupported(new Error("PayPal is not enabled")))},n.prototype._isPayPalEnabled=function(){return!(!this.parsedClientToken||!this.parsedClientToken.paypalEnabled)},n.prototype._hasSecureBrowserProtocol=function(){return/https/.test(window.location.protocol)||this.parsedClientToken.paypalAllowHttp},n.prototype._canBeInitialized=function(){return this._isPayPalEnabled()&&this._hasSecureBrowserProtocol()},n.prototype._setupDomElements=function(){this.insertUI&&(this.container=braintree.paypal.dom.normalizeElement(this.container))},n.prototype._setupPaymentMethodNonceInputField=function(){if(this.insertUI){var t=this.paymentMethodNonceInputField;braintree.Utils.isFunction(t)||(t=void 0!==t?braintree.paypal.dom.normalizeElement(t):this._createPaymentMethodNonceInputField(),this.paymentMethodNonceInputField=t)}},n.prototype._setupViews=function(){this.insertUI&&(this.loggedInView=new braintree.paypal.LoggedInView({container:this.container,assetsUrl:this.parsedClientToken.assetsUrl}),this.loggedOutView=new braintree.paypal.LoggedOutView({assetsUrl:this.parsedClientToken.assetsUrl,container:this.container}),braintree.Utils.addEventListener(this.loggedOutView.buttonNode,"click",braintree.Utils.bind(this._handleButtonClick,this)),braintree.Utils.addEventListener(this.loggedInView.logoutNode,"click",braintree.Utils.bind(this._handleLogout,this)))},n.prototype._setupRPCServer=function(){var t=new braintree.MessageBus(window);this.rpcServer=new braintree.RPCServer(t,window),this.rpcServer.define("closePayPalModal",braintree.Utils.bind(this._handleCloseMessage,this)),this.rpcServer.define("receivePayPalData",braintree.Utils.bind(this._handleSuccessfulAuthentication,this))},n.prototype._createFrameUrl=function(){var t="";return t+=this.parsedClientToken.assetsUrl+"/pwpp/"+braintree.paypal.VERSION+"/html/braintree-frame.html",t+="?locale="+this.locale,t+="&singleUse="+this.singleUse,t+="&demo="+this.demoMode,t+="&displayName="+encodeURIComponent(this.parsedClientToken.paypalDisplayName),t+="&clientApiUrl="+this.parsedClientToken.clientApiUrl,t+="&authUrl="+this.parsedClientToken.authUrl,t+="&authorizationFingerprint="+this.parsedClientToken.authorizationFingerprint,t+="&paypalBaseUrl="+this.parsedClientToken.paypalBaseUrl,t+="&paypalClientId="+this.parsedClientToken.paypalClientId,t+="&paypalPrivacyUrl="+this.parsedClientToken.paypalPrivacyUrl,t+="&paypalUserAgreementUrl="+this.parsedClientToken.paypalUserAgreementUrl,t+="&offline="+this.parsedClientToken.paypalEnvironmentNoNetwork,t+="&integration="+this.integration},n.prototype._createPaymentMethodNonceInputField=function(){var t=document.createElement("input");return t.name="payment_method_nonce",t.type="hidden",this.container.appendChild(t)},n.prototype._createFrame=function(){var t=this._createFrameUrl(),e=document.createElement("iframe");return e.src=t,e.id=braintree.paypal.constants.FRAME_NAME,e.name=braintree.paypal.constants.FRAME_NAME,e.allowTransparency=!0,e.height="100%",e.width="100%",e.frameBorder=0,e.style.position=braintree.paypal.browser.isMobile()?"absolute":"fixed",e.style.top=0,e.style.left=0,e.style.bottom=0,e.style.zIndex=20001,e.style.padding=0,e.style.margin=0,e.style.border=0,e.style.outline="none",e},n.prototype._removeFrame=function(t){t=t||document.body,this.frame&&t.contains(this.frame)&&(t.removeChild(this.frame),this._unlockMerchantWindowSize())},n.prototype._insertFrame=function(){this.insertFrameFunction?this.insertFrameFunction(this._createFrameUrl()):(this.frame=this._createFrame(),document.body.appendChild(this.frame)),this._lockMerchantWindowSize()},n.prototype._handleButtonClick=function(t){t.preventDefault?t.preventDefault():t.returnValue=!1,this._open()},n.prototype._setMerchantPageDefaultStyles=function(){this.merchantPageDefaultStyles=e()},n.prototype._open=function(){braintree.paypal.browser.isPopupSupported()?this._openPopup():this._openModal()},n.prototype._close=function(){braintree.paypal.browser.isPopupSupported()?this._closePopup():this._closeModal()},n.prototype._openModal=function(){this._removeFrame(),this._insertFrame()},n.prototype._openPopup=function(){var t=braintree.paypal.constants.POPUP_NAME,e=braintree.paypal.constants.POPUP_OPTIONS;return this.popup=window.open(this._createFrameUrl(),t,e),this.popup.focus(),this.popup},n.prototype._closeModal=function(){this._removeFrame()},n.prototype._closePopup=function(){this.popup&&(this.popup.close(),this.popup=null)},n.prototype._handleSuccessfulAuthentication=function(t,e){braintree.Utils.isFunction(this.onSuccess)&&this.onSuccess(t,e),this._close(),braintree.Utils.isFunction(this.paymentMethodNonceInputField)?this.paymentMethodNonceInputField(t):(this._showLoggedInContent(e),this._setNonceInputValue(t))},n.prototype._lockMerchantWindowSize=function(){this._setMerchantPageDefaultStyles(),document.documentElement.style.overflow="hidden",document.body.style.height="100%",document.body.style.overflow="hidden",braintree.paypal.browser.isMobile()&&(window.scrollTo(0,0),this._updateMerchantWindowHeight(document.documentElement.clientHeight),braintree.Utils.addEventListener("resize",this.windowResizeListener))},n.prototype._unlockMerchantWindowSize=function(){this.merchantPageDefaultStyles&&(document.documentElement.style.height=this.merchantPageDefaultStyles.html.styles.height,document.documentElement.style.overflow=this.merchantPageDefaultStyles.html.styles.overflow,document.body.style.height=this.merchantPageDefaultStyles.body.styles.height,document.body.style.overflow=this.merchantPageDefaultStyles.body.styles.overflow),braintree.Utils.removeEventListener("resize",this.windowResizeListener)},n.prototype._handleWindowResize=function(){this._updateMerchantWindowHeight(document.documentElement.clientHeight)},n.prototype._updateMerchantWindowHeight=function(t){document.documentElement.style.height=t+"px",this.frame.style.minHeight=t+"px"},n.prototype._handleCloseMessage=function(){this._removeFrame()},n.prototype._showLoggedInContent=function(t){this.loggedOutView.hide(),braintree.paypal.dom.setTextContent(this.loggedInView.emailNode,t),this.loggedInView.show()},n.prototype._handleLogout=function(t){t.preventDefault?t.preventDefault():t.returnValue=!1,this.loggedInView.hide(),this.loggedOutView.show(),this._setNonceInputValue(""),braintree.Utils.isFunction(this.onCancelled)&&this.onCancelled()},n.prototype._setNonceInputValue=function(t){this.paymentMethodNonceInputField.value=t},n.prototype._parseClientToken=function(t){if(!t||0===t.length)throw new Error("clientToken not provided.");var e=braintree.api.parseClientToken(t);return e.paypalEnabled?{assetsUrl:e.paypal.assetsUrl,authUrl:e.authUrl,authorizationFingerprint:encodeURIComponent(e.authorizationFingerprint),clientApiUrl:encodeURIComponent(e.clientApiUrl),paypalAllowHttp:braintree.paypal.util.castToBoolean(e.paypal.allowHttp),paypalBaseUrl:e.paypal.assetsUrl,paypalClientId:e.paypal.clientId,paypalDisplayName:e.paypal.displayName,paypalEnvironmentNoNetwork:braintree.paypal.util.castToBoolean(e.paypal.environmentNoNetwork),paypalPrivacyUrl:encodeURIComponent(e.paypal.privacyUrl),paypalUserAgreementUrl:encodeURIComponent(e.paypal.userAgreementUrl),paypalEnabled:braintree.paypal.util.castToBoolean(e.paypalEnabled)}:!1},braintree.paypal.Client=n}()}(),function(){"use strict";!function(){var t=t||window,e=t.braintree||{};e.dropin=e.dropin||{},e.dropin.version="1.0.6",e.dropin.Shared={},e.dropin.InlineFrame={},t.braintree=e}(),function(){braintree.dropin.create=function(t,e){e.clientToken=t;var n=new braintree.dropin.Client(e);return n.initialize(),n}}(),function(){function t(t){this.form=t.form,this.frames=t.frames,this.onSubmit=t.onSubmit,this.apiClient=t.apiClient}t.prototype.initialize=function(){return this._isSubmitBased()&&this._setElements(),this._setEvents(),this},t.prototype.writeNonce=function(t){this.currentNonce=t},t.prototype._isSubmitBased=function(){return!this.onSubmit},t.prototype._isCallbackBased=function(){return!!this.onSubmit},t.prototype._setElements=function(){if(!this.form.payment_method_nonce){var t=document.createElement("input");t.type="hidden",t.name="payment_method_nonce",this.form.appendChild(t)}this.nonceField=this.form.payment_method_nonce
},t.prototype._setEvents=function(){var t=this;braintree.Utils.addEventListener(this.form,"submit",function(){t._handleFormSubmit.apply(t,arguments)})},t.prototype._handleFormSubmit=function(t){this._shouldSubmit()||(t&&t.preventDefault?t.preventDefault():t.returnValue=!1,this.currentNonce?this._handleNonceReply(t):this.frames.inline.rpcClient.invoke("requestNonce",[],braintree.Utils.bind(function(e){this.writeNonce(e),this._handleNonceReply(t)},this)))},t.prototype._shouldSubmit=function(){return this._isCallbackBased()?!1:this.nonceField.value.length>0},t.prototype._handleNonceReply=function(t){this._isCallbackBased()?this.apiClient.sendAnalyticsEvents("dropin.web.end.callback",braintree.Utils.bind(function(){this.onSubmit(t,this.currentNonce),setTimeout(braintree.Utils.bind(function(){this.frames.inline.rpcClient.invoke("clearLoadingState")},this),200)},this)):this._triggerFormSubmission()},t.prototype._triggerFormSubmission=function(){this.nonceField.value=this.currentNonce,this.apiClient.sendAnalyticsEvents("dropin.web.end.auto-submit",braintree.Utils.bind(function(){"function"==typeof this.form.submit?this.form.submit():this.form.querySelector('[type="submit"]').click()},this))},braintree.dropin.MerchantFormManager=t}(),function(){function t(t,e){var n=window.getComputedStyle?getComputedStyle(t):t.currentStyle;return n[e]}function e(){return{html:{height:r.style.height||"",overflow:t(r,"overflow"),position:t(r,"position")},body:{height:o.style.height||"",overflow:t(o,"overflow")}}}function n(){var t=/Android|iPhone|iPod|iPad/i.test(window.navigator.userAgent);return t}function i(t){var e,n,i,a=braintree.dropin.version;this.encodedClientToken=t.clientToken,this.paypalOptions=t.paypal,this.container=null,this.merchantFormManager=null,this.root=t.root,this.configurationRequests=[],this.braintreeApiClient=braintree.api.configure({clientToken:t.clientToken,integration:"dropin"}),this.paymentMethodNonceReceivedCallback=t.paymentMethodNonceReceived,this.clientToken=braintree.api.parseClientToken(t.clientToken),this.bus=new braintree.MessageBus(this.root),this.rpcServer=new braintree.RPCServer(this.bus),this.apiProxyServer=new braintree.dropin.APIProxyServer(this.braintreeApiClient),this.apiProxyServer.attach(this.rpcServer),e=t.inlineFramePath||this.clientToken.assetsUrl+"/dropin/"+a+"/inline_frame.html",n=t.modalFramePath||this.clientToken.assetsUrl+"/dropin/"+a+"/modal_frame.html",r=document.documentElement,o=document.body,this.frames={inline:this._createFrame(e),modal:this._createFrame(n)},this.container=braintree.Utils.normalizeElement(t.container,"Unable to find valid container."),i=braintree.Utils.normalizeElement(t.form||this._findClosest(this.container,"form")),this.merchantFormManager=new braintree.dropin.MerchantFormManager({form:i,frames:this.frames,onSubmit:this.paymentMethodNonceReceivedCallback,apiClient:this.braintreeApiClient}).initialize(),this.clientToken.paypalEnabled&&this._configurePayPal(),this.braintreeApiClient.sendAnalyticsEvents("dropin.web.initialized")}var r,o;i.prototype.initialize=function(){var t=this;this._initializeModal(),this.container.appendChild(this.frames.inline.element),o.appendChild(this.frames.modal.element),this.rpcServer.define("receiveSharedCustomerIdentifier",function(e){t.braintreeApiClient.attrs.sharedCustomerIdentifier=e,t.braintreeApiClient.attrs.sharedCustomerIdentifierType="browser_session_cookie_store";for(var n=0;n<t.configurationRequests.length;n++)t.configurationRequests[n](t.encodedClientToken);t.configurationRequests=[]}),this.rpcServer.define("getConfiguration",function(e){e(t.encodedClientToken)}),this.rpcServer.define("getPayPalOptions",function(e){e(t.paypalOptions)}),this.rpcServer.define("selectPaymentMethod",function(e){t.frames.modal.rpcClient.invoke("selectPaymentMethod",[e]),t._showModal()}),this.rpcServer.define("sendAddedPaymentMethod",function(e){t.merchantFormManager.writeNonce(e.nonce),t.frames.inline.rpcClient.invoke("receiveNewPaymentMethod",[e])}),this.rpcServer.define("sendUsedPaymentMethod",function(e){t.frames.inline.rpcClient.invoke("selectPaymentMethod",[e])}),this.rpcServer.define("sendUnlockedNonce",function(e){t.merchantFormManager.writeNonce(e)}),this.rpcServer.define("clearNonce",function(){t.merchantFormManager.writeNonce("")}),this.rpcServer.define("closeDropInModal",function(){t._hideModal()}),this.rpcServer.define("setInlineFrameHeight",function(e){t.frames.inline.element.style.height=e+"px"}),this.bus.register("ready",function(e){e.source===t.frames.inline.element.contentWindow?t.frames.inline.rpcClient=new braintree.RPCClient(t.bus,e.source):e.source===t.frames.modal.element.contentWindow&&(t.frames.modal.rpcClient=new braintree.RPCClient(t.bus,e.source))})},i.prototype._createFrame=function(t){return new braintree.dropin.FrameContainer(t)},i.prototype._initializeModal=function(){this.frames.modal.element.style.display="none",this.frames.modal.element.style.position=n()?"absolute":"fixed",this.frames.modal.element.style.top="0",this.frames.modal.element.style.left="0",this.frames.modal.element.style.height="100%",this.frames.modal.element.style.width="100%"},i.prototype._lockMerchantWindowSize=function(){setTimeout(function(){r.style.overflow="hidden",o.style.overflow="hidden",o.style.height="100%",n()&&(r.style.position="relative",r.style.height=window.innerHeight+"px")},160)},i.prototype._unlockMerchantWindowSize=function(){var t=this.merchantPageDefaultStyles;o.style.height=t.body.height,o.style.overflow=t.body.overflow,r.style.overflow=t.html.overflow,n()&&(r.style.height=t.html.height,r.style.position=t.html.position)},i.prototype._showModal=function(){var t=this,n=this.frames.modal.element;this.merchantPageDefaultStyles=e(),n.style.display="block",this.frames.modal.rpcClient.invoke("open",[],function(){setTimeout(function(){t._lockMerchantWindowSize(),n.contentWindow.focus()},200)})},i.prototype._hideModal=function(){this._unlockMerchantWindowSize(),this.frames.modal.element.style.display="none"},i.prototype._configurePayPal=function(){braintree.paypal.browser.isPopupSupported()||(this.ppClient=new braintree.dropin.PayPalService({clientToken:this.clientToken,paypal:this.paypalOptions}),this.rpcServer.define("openPayPalModal",braintree.Utils.bind(this.ppClient._openModal,this.ppClient))),this.rpcServer.define("receivePayPalData",braintree.Utils.bind(this._handlePayPalData,this))},i.prototype._handlePayPalData=function(t,e){this.merchantFormManager.writeNonce(t),this.frames.inline.rpcClient.invoke("receiveNewPaymentMethod",[{nonce:t,email:e}]),this.frames.modal.rpcClient.invoke("paypalViewClose")},i.prototype._findClosest=function(t,e){e=e.toUpperCase();do if(t.nodeName===e)return t;while(t=t.parentNode);throw"Unable to find a valid "+e},braintree.dropin.Client=i}(),function(){function t(t){this.apiClient=t}var e=["getCreditCards","unlockCreditCard","sendAnalyticsEvents"];t.prototype.attach=function(t){function n(e){t.define(e,function(){i.apiClient[e].apply(i.apiClient,arguments)})}var i=this,r=0,o=e.length;for(r;o>r;r++)n(e[r])},braintree.dropin.APIProxyServer=t}(),function(){function t(t){this.element=document.createElement("iframe"),this.element.setAttribute("allowtransparency","true"),this.element.setAttribute("width","100%"),this.element.setAttribute("height","68"),this.element.setAttribute("style","-webkit-transition: height 210ms cubic-bezier(0.390, 0.575, 0.565, 1.000); -moz-transition: height 210ms cubic-bezier(0.390, 0.575, 0.565, 1.000); -ms-transition: height 210ms cubic-bezier(0.390, 0.575, 0.565, 1.000); -o-transition: height 210ms cubic-bezier(0.390, 0.575, 0.565, 1.000); transition: height 210ms cubic-bezier(0.390, 0.575, 0.565, 1.000);"),this.element.src=t,this.element.setAttribute("frameborder","0"),this.element.setAttribute("allowtransparency","true"),this.element.style.border="0",this.element.style.zIndex="9999"}braintree.dropin.FrameContainer=t}(),function(){function t(t){var e=t.clientToken,n=t.paypal||{},i=new braintree.paypal.Client(e,{container:document.createElement("div"),displayName:n.displayName,locale:n.locale,singleUse:n.singleUse,onSuccess:n.onSuccess});return i.initialize(),i}braintree.dropin.PayPalService=t}()}(this),function(t){var e=t.braintree||{};e.setup=function(t,n,i){if("dropin"===n||"paypal"===n)i.integration=n,e[n].create(t,i);else{if("custom"!==n)throw new Error(n+" is an unsupported integration");var r=new e.api.Client({clientToken:t,integration:n}),o=e.Form.setup(r,i);i.paypal&&(void 0==i.paypal.paymentMethodNonceInputField&&(i.paypal.paymentMethodNonceInputField=o.paymentMethodNonce),i.paypal.integration=n,e.paypal.create(t,i.paypal))}},e.cse=Braintree,e.version="2.0.5"}(this);